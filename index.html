<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>json_test</title>
    <!--p5库-->
    <script src="libraries/p5.js" type="text/javascript"></script>
    <script src="jquery.min.js" type="text/javascript"></script>
    <script src="libraries/p5.dom.js" type="text/javascript"></script>
    <script src="libraries/p5.sound.js" type="text/javascript"></script>

    <!--存放绘画函数-->
    <script src="sketch.js" type="text/javascript"></script>

    <!--数据转化的部分-->
    <script src="usedata.js" type="text/javascript"></script>
    <!--<link rel="stylesheet" href="">-->

    <style>
      body {
        padding: 0; margin: 0;
        background-color: #00193B;
      }
      canvas {
        vertical-align: top;
      }
      #a_canvas{
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
      .loadingclass{
        font-size: 30px;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div id="a_canvas"></div>
    <div id="p5_loading" class="loadingclass">this could be some sweet graphics loading lots of bits.</div>
  <script type="text/javascript">
      var data = []

//      选择要加载的数据，此处没办法读取数据条数
      function preload() {
          data = loadJSON('test1.json')
      }

      function setup() {
          var mainCanvas = createCanvas(800, 600)
          mainCanvas.parent('#a_canvas')
          background('#00193B')
          noLoop();
          console.log("the length: " + typeof(data.length))
          console.log("length: " + data.length)
      }

    function draw() {

          // 环形1
          for(var i1 = 0;i1<300;i1++){
              an = i1/300*TWO_PI
              var r1 = width/2 + sin(an)* 220
              var r2 = height/2 - cos(an)* 220
              var r3 = width/2 + sin(an)* 240
              var r4 = height/2 - cos(an)* 240
              stroke(255)
              // fill(255);
              strokeWeight(0.2)
              line(r1,r2,r3,r4)
              // rotate(PI*r_i/360)
              // r_i +=1

          }

          // 环形2
          for(i2 = 0;i2<260;i2++){
              // background(0,29,59)
              an2 = i2/260*TWO_PI
              r5 = width/2 + sin(an2)* 260
              r6 = height/2 - cos(an2)* 260
              r7 = width/2 + sin(an2)* 280
              r8 = height/2 - cos(an2)* 280
              stroke(160)
              strokeWeight(0.2)
              line(r5,r6,r7,r8)
          }

          // 一段文字

          noStroke()
          fill(255,10)
          textSize(40)
          text("\"琳琳姐姐说说",width/2,height/2)

        //文字内容部分
        /* 👍先不画了试一下
          var j = 1;
          // 手动输出数组长度
          for (var i = 0; i < 236; i++) {
              var re = data[i].retweet_from
              var notonlyshare = true
              if (data[i].maintext === "分享图片" || data[i].maintext === "分享视频") {
                  notonlyshare = false
              }

              if (re === "" && notonlyshare) { //过滤非原创，并没有成功过滤分享视频和分享图片
                  var testtemp2 = radius_angle(data[i].created_at,2015,2017,0,300);

                  console.log(testtemp2.return_angle);
                  console.log(testtemp2.return_radius);
                  fill(220)
                  textSize(10)
                  var moody_color = try_ajax(data[i].maintext)
                  console.log("白人问号"+i +": "+ try_ajax(data[i].maintext))
                  console.log("内容"+data[i].maintext)
//                  createDiv("主要内容: " + data[i].maintext, 10, 20 * j + 20)
                  real_draw(testtemp2.return_radius,testtemp2.return_angle,moody_color,moody_color)
                j++
              }
          }*/
      }


  </script>
  </body>
</html>
